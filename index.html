<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Test Animasi Canvas</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(180deg, #74b9ff, #a29bfe);
}
canvas {
  position: fixed;
  top: 0;
  left: 0;
}
</style>
</head>
<body>
<canvas id="sky"></canvas>

<script>
window.onload = function() {
  var canvas = document.getElementById('sky');
  var ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  var stars = [];
  for (var i = 0; i < 100; i++) {
    stars.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 1.5 + 0.5,
      blink: Math.random() * Math.PI * 2
    });
  }

  var shootingStars = [];

  function spawnShootingStar() {
    shootingStars.push({
      x: Math.random() * canvas.width,
      y: Math.random() * 200,
      len: Math.random() * 80 + 100,
      speed: Math.random() * 3 + 4
    });
    setTimeout(spawnShootingStar, 2500 + Math.random() * 2000);
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Bintang berkelip
    for (var i = 0; i < stars.length; i++) {
      var s = stars[i];
      s.blink += 0.05;
      var alpha = 0.6 + 0.4 * Math.sin(s.blink);
      ctx.fillStyle = 'rgba(255,255,255,' + alpha + ')';
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fill();
    }

    // Bintang jatuh
    ctx.strokeStyle = "white";
    ctx.lineWidth = 2;
    for (var j = 0; j < shootingStars.length; j++) {
      var ss = shootingStars[j];
      ctx.beginPath();
      ctx.moveTo(ss.x, ss.y);
      ctx.lineTo(ss.x - ss.len, ss.y + ss.len / 2);
      ctx.stroke();

      ss.x -= ss.speed * 2;
      ss.y += ss.speed;
    }
    shootingStars = shootingStars.filter(function(s) {
      return s.x > -s.len && s.y < canvas.height;
    });

    requestAnimationFrame(draw);
  }

  spawnShootingStar();
  draw();
};
</script>
</body>
</html>
