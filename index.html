<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Untukmu di Bawah Langit Malam 💙</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap');

*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Baloo 2',cursive;
  background:linear-gradient(180deg,#74b9ff,#a29bfe);
  overflow:hidden;height:100vh;
  display:flex;justify-content:center;align-items:center;
  color:#fff;user-select:none;-webkit-user-select:none;
}
canvas{position:fixed;inset:0;z-index:1;}

.slide{
  position:absolute;text-align:center;
  transition:opacity 1s ease,transform 1.2s ease;
  opacity:0;transform:scale(0.95);z-index:2;
  width:90%;max-width:400px;
}
.slide.active{opacity:1;transform:scale(1);}
img{
  width:100%;max-width:280px;height:auto;object-fit:cover;
  border-radius:20px;border:3px solid #fff;
  box-shadow:0 0 20px rgba(255,255,255,.4);
  animation:float 3s ease-in-out infinite;
}
@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);}}
h1{
  font-weight:600;margin-top:15px;font-size:1.3em;
  text-shadow:2px 2px 8px rgba(0,0,0,.3);
  padding:0 10px;opacity:0;animation:fadeInText 1.5s forwards;
}
@keyframes fadeInText{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

.tap-zone{position:fixed;top:0;bottom:0;width:50%;z-index:5;}
#left{left:0;}#right{right:0;}

.butterfly{
  position:fixed;width:28px;height:28px;z-index:3;opacity:.9;
  background:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">\
<path fill="%23ffc96b" d="M32 32c-2 6-9 14-14 10s-3-10 4-15c-7-2-12-7-11-10s9-4 15 3c-1-7 2-12 6-12s7 5 6 12c6-7 14-5 15-3s-4 8-11 10c7 5 9 11 4 15s-12-4-14-10z"/>\
</svg>') center/contain no-repeat;
  pointer-events:none;
}

.heart{
  position:fixed;top:-10px;z-index:4;font-size:20px;color:#ff86a8;
  animation:fall 5.5s linear forwards;
  filter:drop-shadow(0 0 6px rgba(255,134,168,.6));
}
@keyframes fall{
  0%{transform:translateY(0) scale(1);opacity:1;}
  100%{transform:translateY(110vh) scale(1.5);opacity:0;}
}

@media(max-width:600px){
  img{max-width:230px;}
  h1{font-size:1.1em;}
}
</style>
</head>
<body>

<canvas id="sky"></canvas>

<!-- 4 kupu-kupu -->
<div class="butterfly" id="b1"></div>
<div class="butterfly" id="b2"></div>
<div class="butterfly" id="b3"></div>
<div class="butterfly" id="b4"></div>

<!-- slides -->
<div class="slide active"><img src="foto1.jpeg"><h1>Selamat ulang tahun ke-18 sayangkuu 💙</h1></div>
<div class="slide"><img src="foto2.jpeg"><h1>Terima kasih udah selalu sabar banget sama mas yaa 🥰</h1></div>
<div class="slide"><img src="foto3.jpeg"><h1>Udah banyak banget hal yang kita lalui bareng2, dan mas gamau berhenti di sini aja 💫</h1></div>
<div class="slide"><img src="foto4.jpeg"><h1>Semoga Allah jaga hubungan kita berdua, dunia dan akhirat 🌙</h1></div>
<div class="slide"><img src="foto5.jpeg"><h1>Dan semoga apa yang kamu inginkan segera tercapai yaa 💞</h1></div>
<div class="slide"><img src="foto6.jpeg"><h1>💐 Love youuuu 💐</h1></div>

<div class="tap-zone" id="left"></div>
<div class="tap-zone" id="right"></div>

<audio id="bg-music" loop playsinline>
  <source src="lagunya.mp3" type="audio/mpeg">
</audio>

<script>
// ===== Musik =====
const music=document.getElementById('bg-music');
let started=false;
document.addEventListener('click',()=>{
  if(!started){music.play().catch(()=>{});started=true;}
});

// ===== Slides =====
const slides=document.querySelectorAll('.slide');
let index=0;
function showSlide(i){
  slides.forEach((s,idx)=>{
    s.classList.toggle('active',idx===i);
    const h=s.querySelector('h1');
    h.style.animation=idx===i?'fadeInText 1.5s forwards':'none';
  });
  if(i===slides.length-1)startHearts();
}
document.getElementById('right').addEventListener('click',()=>{
  index=(index+1)%slides.length;showSlide(index);
});
document.getElementById('left').addEventListener('click',()=>{
  index=(index-1+slides.length)%slides.length;showSlide(index);
});

// ===== Canvas Sky =====
const canvas=document.getElementById('sky'),ctx=canvas.getContext('2d');
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
resize();window.addEventListener('resize',resize);

const stars=Array.from({length:140},()=>({
  x:Math.random()*canvas.width,y:Math.random()*canvas.height,
  r:Math.random()*1.5+0.5,blink:Math.random()*Math.PI*2
}));
let moon={x:canvas.width*0.82,y:84,r:40,dy:.05,dir:1};
let meteors=[];
function spawnMeteor(){
  const x=Math.random()*canvas.width,y=Math.random()*canvas.height*0.3;
  const len=Math.random()*90+110,speed=Math.random()*2+3.2;
  meteors.push({x,y,len,speed,trail:[]});
  setTimeout(spawnMeteor,3500+Math.random()*3500);
}
setTimeout(spawnMeteor,1400);
function drawSky(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // stars
  for(let s of stars){
    s.blink+=0.03;
    const a=0.6+0.4*Math.sin(s.blink);
    ctx.fillStyle=`rgba(255,255,255,${a})`;
    ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fill();
  }
  // meteors
  ctx.globalCompositeOperation='lighter';
  for(let m of meteors){
    ctx.shadowBlur=16;ctx.shadowColor='rgba(255,210,120,0.9)';
    ctx.strokeStyle='rgba(255,220,130,0.85)';
    ctx.lineWidth=2.2;
    ctx.beginPath();ctx.moveTo(m.x,m.y);
    ctx.lineTo(m.x-m.len,m.y+m.len/2);ctx.stroke();
    m.trail.push({x:m.x,y:m.y,a:1});
    for(let p of m.trail){
      ctx.fillStyle=`rgba(255,200,120,${p.a})`;
      ctx.beginPath();ctx.arc(p.x,p.y,2.5,0,Math.PI*2);ctx.fill();
      p.a-=0.03;
    }
    m.trail=m.trail.filter(p=>p.a>0.05);
    m.x-=m.speed*2.2;m.y+=m.speed*1.1;
  }
  meteors=meteors.filter(m=>m.x>-m.len&&m.y<canvas.height);
  ctx.globalCompositeOperation='source-over';
  // moon
  ctx.beginPath();ctx.arc(moon.x,moon.y,moon.r,0,Math.PI*2);
  ctx.fillStyle='#fff7d0';ctx.fill();
  moon.y+=moon.dy*moon.dir;if(moon.y<62||moon.y>102)moon.dir*=-1;
  requestAnimationFrame(drawSky);
}
drawSky();

// ===== Kupu-kupu random movement =====
const butterflies=[...document.querySelectorAll('.butterfly')];
const area={w:window.innerWidth,h:window.innerHeight};
butterflies.forEach(b=>{
  b.dataset.x=Math.random()*area.w;
  b.dataset.y=Math.random()*area.h;
  b.dataset.dx=(Math.random()-.5)*1.5;
  b.dataset.dy=(Math.random()-.5)*1.5;
});
function animateButterflies(){
  butterflies.forEach(b=>{
    let x=parseFloat(b.dataset.x),y=parseFloat(b.dataset.y);
    let dx=parseFloat(b.dataset.dx),dy=parseFloat(b.dataset.dy);
    x+=dx;y+=dy;
    if(x<0||x>area.w-40)dx*=-1;
    if(y<0||y>area.h-40)dy*=-1;
    b.dataset.x=x;b.dataset.y=y;
    b.dataset.dx=dx+(Math.random()-.5)*0.05;
    b.dataset.dy=dy+(Math.random()-.5)*0.05;
    b.style.transform=`translate(${x}px,${y}px) rotate(${dx*10}deg)`;
  });
  requestAnimationFrame(animateButterflies);
}
animateButterflies();

// ===== Love Rain =====
function startHearts(){
  if(window._heartsStarted)return;
  window._heartsStarted=true;
  setInterval(()=>{
    const h=document.createElement('div');
    h.className='heart';h.textContent='❤️';
    h.style.left=Math.random()*100+'vw';
    h.style.fontSize=(Math.random()*12+16)+'px';
    h.style.animationDuration=(Math.random()*2+4)+'s';
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),7000);
  },220);
}
</script>
</body>
</html>
